# Application
quarkus.application.name=achat-groupe

# OpenAPI
quarkus.smallrye-openapi.store-schema-directory=target/openapi
quarkus.smallrye-openapi.info-title=Achat Groupe API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.security-scheme=oidc
quarkus.smallrye-openapi.oidc-open-id-connect-url=https://placeholder/.well-known/openid-configuration

# Quinoa (Frontend)
quarkus.quinoa.package-manager-install=true
quarkus.quinoa.package-manager-install.node-version=22.22.0
quarkus.quinoa.package-manager-install.npm-version=11.7.0
quarkus.quinoa.dev-server.port=5173
quarkus.quinoa.build-dir=dist
quarkus.quinoa.enable-spa-routing=true

# Database - Dev Services
quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.reuse=true
%test.quarkus.datasource.devservices.reuse=false
quarkus.hibernate-orm.database.generation=none
quarkus.flyway.migrate-at-start=true
%dev.quarkus.flyway.locations=db/migration,db/seed

# OIDC Configuration
quarkus.oidc.application-type=web-app
quarkus.oidc.authentication.redirect-path=/admin/
quarkus.oidc.logout.path=/api/admin/logout

stripe.api-key=sk_test_dummy
stripe.webhook-secret=dummy

# HTTP Auth Permissions - Admin (authenticated)
quarkus.http.auth.permission.admin.paths=/api/admin/*
quarkus.http.auth.permission.admin.policy=authenticated
quarkus.http.auth.permission.backoffice.paths=/api/backoffice/*
quarkus.http.auth.permission.backoffice.policy=authenticated

# HTTP Auth Permissions - Public
quarkus.http.auth.permission.public.paths=/api/products/*,/api/ventes/*,/api/orders/*,/api/timeslots/*
quarkus.http.auth.permission.public.policy=permit
quarkus.http.auth.permission.webhook.paths=/api/webhooks/*
quarkus.http.auth.permission.webhook.policy=permit

# App base URL (for URL validation)
app.base-url=${APP_BASE_URL:http://localhost:8080}

# Order settings
app.order.max-payment-attempts=2
app.order.abandon-timeout=30m

# Test profile
%test.app.base-url=http://localhost:8081
%test.quarkus.cucumber.glue=fr.sqq.achatgroupe.acceptance.steps
%test.quarkus.playwright.headless=true
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.quinoa=true
%test.quarkus.oidc.enabled=false
%test.quarkus.keycloak.devservices.enabled=false
%test.quarkus.http.auth.permission.admin-products.paths=/api/admin/products,/api/admin/products/*
%test.quarkus.http.auth.permission.admin-products.policy=permit
%test.quarkus.http.auth.permission.admin-timeslots.paths=/api/admin/timeslots,/api/admin/timeslots/*
%test.quarkus.http.auth.permission.admin-timeslots.policy=permit
%test.quarkus.http.auth.permission.admin-ventes.paths=/api/admin/ventes,/api/admin/ventes/*
%test.quarkus.http.auth.permission.admin-ventes.policy=permit
%test.quarkus.http.auth.permission.admin-dashboard.paths=/api/admin/dashboard,/api/admin/dashboard/*
%test.quarkus.http.auth.permission.admin-dashboard.policy=permit
%test.quarkus.http.auth.permission.backoffice-orders.paths=/api/backoffice/orders,/api/backoffice/orders/*
%test.quarkus.http.auth.permission.backoffice-orders.policy=permit
%test.quarkus.http.auth.permission.backoffice-supplier-orders.paths=/api/backoffice/supplier-orders
%test.quarkus.http.auth.permission.backoffice-supplier-orders.policy=permit
%test.quarkus.http.auth.permission.backoffice-preparation.paths=/api/backoffice/preparation
%test.quarkus.http.auth.permission.backoffice-preparation.policy=permit
%test.quarkus.http.auth.permission.backoffice-pickup.paths=/api/backoffice/orders/*/pickup
%test.quarkus.http.auth.permission.backoffice-pickup.policy=permit

quarkus.keycloak.devservices.image-name=quay.io/keycloak/keycloak:26.5.3
quarkus.keycloak.devservices.keycloak-x-image=true